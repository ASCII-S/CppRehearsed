# 多态的实现方式详解

---

**面试官：**我们来聊聊C++的多态吧，你能简单说说什么是多态吗？

**面试者：**当然可以！多态其实就是“多种形态”，在C++里，指的是同一个接口可以有不同的实现。比如同一个函数名，能根据对象类型表现出不同的行为。

**面试官：**那C++里多态有哪几种实现方式？

**面试者：**主要有两种：静态多态和动态多态。

---

## 1. 静态多态（编译时多态）

**面试官：**什么是静态多态？

**面试者：**静态多态发生在编译阶段，常见的有函数重载、运算符重载和模板。比如同一个函数名，参数不同，编译器会自动选用合适的实现。

**面试官：**举个例子？

**面试者：**比如：

> 代码演示见[TODO1-函数重载与运算符重载](../../MyOutput/02-C++object/CodeOut/polymorphism/overload_demo.cpp)

**面试官：**那模板函数算多态吗？

**面试者：**算的，模板函数其实也是一种静态多态。它通过在编译期生成不同类型的函数版本，实现了“多种形态”。比如同一个模板函数，可以处理int、double、string等不同类型。

> 代码演示见[TODO2-模板函数多态](../../MyOutput/02-C++object/CodeOut/polymorphism/template_demo.cpp)

---

## 2. 动态多态（运行时多态）

**面试官：**那动态多态呢？

**面试者：**动态多态发生在运行阶段，主要靠虚函数实现。父类指针或引用指向子类对象，通过虚函数调用，实际执行的是子类的实现。

**面试官：**虚函数和纯虚函数有什么区别？

**面试者：**虚函数是用`virtual`修饰的成员函数，可以被子类重写。纯虚函数是没有实现的虚函数，类里有纯虚函数就是抽象类，不能实例化，只能被继承。

**面试官：**能举个虚函数和纯虚函数的例子吗？

**面试者：**当然：

> 代码演示见[TODO3-虚函数与纯虚函数](../../MyOutput/02-C++object/CodeOut/polymorphism/virtual_demo.cpp)

---

## 3. 虚继承与菱形继承

**面试官：**那你知道C++多继承下的菱形继承和虚继承吗？

**面试者：**知道。菱形继承会导致基类被继承多份，访问成员时会有二义性。虚继承可以解决这个问题，让最顶层的基类只保留一份。

**面试官：**能举个例子说明下吗？

**面试者：**可以：

> 代码演示见[TODO4-虚继承与菱形继承](../../MyOutput/02-C++object/CodeOut/polymorphism/diamond_virtual_inherit.cpp)

---

## 4. dynamic_cast的使用

**面试官：**那你用过`dynamic_cast`吗？

**面试者：**用过。`dynamic_cast`主要用于多态类型的安全类型转换，比如基类指针转子类指针时，可以在运行时检查类型是否安全。

**面试官：**举个实际用法？

**面试者：**比如：

> 代码演示见[TODO5-dynamic_cast用法](../../MyOutput/02-C++object/CodeOut/polymorphism/dynamic_cast_demo.cpp)

---

## 高频面试题回顾

1. C++多态的实现方式有哪些？
2. 虚函数和纯虚函数的区别？
3. 菱形继承是什么？怎么解决？
4. dynamic_cast和static_cast的区别？
5. 多态的实际应用场景？

---

## 代码演示引导

请根据上面每个TODO序号，在`../../MyOutput/02-C++object/CodeOut/polymorphism/`目录下新建对应的代码文件，先写出类结构和注释，留出实现细节，控制每个文件的编码时间在30分钟以内。完成后可参考`Solution`子目录下的标准答案。

